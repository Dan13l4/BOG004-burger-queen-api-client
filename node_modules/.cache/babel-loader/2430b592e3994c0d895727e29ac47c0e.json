{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\57322\\\\Documents\\\\GitHub\\\\Proyectos Laboratoria\\\\BOG004-burger-queen-api-client\\\\src\\\\Context\\\\CartContext.jsx\",\n    _s = $RefreshSig$();\n\nimport { createContext, useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { getToken } from '../api/api';\n/* Creamos el context, se le puede pasar un valor inicial */\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CartContext = /*#__PURE__*/createContext();\nexport const CartProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n\n  /* Creamos un estado para el carrito */\n  const [cartItems, setCartItems] = useState([]);\n  const [products, setProducts] = useState([]);\n\n  const getProducts = async () => {\n    await axios.get(\"http://localhost:8080/products\", {\n      headers: {\n        authorization: \"Bearer \" + getToken()\n      }\n    }).then(_ref2 => {\n      let {\n        data\n      } = _ref2;\n      return setProducts(data.products);\n    });\n  };\n\n  const addItemToCart = product => {\n    const inCart = cartItems.find(productInCart => productInCart.id === product.id);\n\n    if (inCart) {\n      setCartItems(cartItems.map(productInCart => {\n        if (productInCart.id === product.id) {\n          return { ...inCart,\n            amount: inCart.amount + 1\n          };\n        } else return productInCart;\n      }));\n    } else {\n      setCartItems([...cartItems, { ...product,\n        amount: 1\n      }]);\n    }\n  };\n\n  const deleteItemToCart = product => {\n    const inCart = cartItems.find(productInCart => productInCart.id === product.id);\n\n    if (inCart.amount === 1) {\n      setCartItems(cartItems.filter(productInCart => productInCart.id !== product.id));\n    } else {\n      setCartItems(cartItems.map(productInCart => {\n        if (productInCart.id === product.id) {\n          return { ...inCart,\n            amount: inCart.amount - 1\n          };\n        } else return productInCart;\n      }));\n    }\n  };\n\n  return (\n    /*#__PURE__*/\n\n    /* Envolvemos el children con el provider y le pasamos un objeto con las propiedades que necesitamos por value */\n    _jsxDEV(CartContext.Provider, {\n      value: {\n        cartItems,\n        products,\n        addItemToCart,\n        editItemToCart\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 5\n    }, this)\n  );\n};\n\n_s(CartProvider, \"3veYI0+4BYDM6Shlfi+DI0M4Iaw=\");\n\n_c = CartProvider;\nexport default CartContext;\n\nvar _c;\n\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["createContext","useEffect","useState","axios","getToken","CartContext","CartProvider","children","cartItems","setCartItems","products","setProducts","getProducts","get","headers","authorization","then","data","addItemToCart","product","inCart","find","productInCart","id","map","amount","deleteItemToCart","filter","editItemToCart"],"sources":["C:/Users/57322/Documents/GitHub/Proyectos Laboratoria/BOG004-burger-queen-api-client/src/Context/CartContext.jsx"],"sourcesContent":["import { createContext, useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { getToken } from '../api/api';\r\n\r\n/* Creamos el context, se le puede pasar un valor inicial */\r\nconst CartContext = createContext();\r\n\r\nexport const CartProvider = ({ children }) => {\r\n  /* Creamos un estado para el carrito */\r\n  const [cartItems, setCartItems] = useState([]);\r\n  const [products, setProducts] = useState([]);\r\n\r\n  const getProducts = async () => {\r\n    await axios\r\n      .get(\"http://localhost:8080/products\", {headers: {authorization: \"Bearer \" + getToken()}})\r\n      .then(({ data }) => setProducts(data.products));\r\n  };\r\n\r\n    const addItemToCart = (product) => {\r\n        const inCart = cartItems.find(\r\n        (productInCart)=> productInCart.id === product.id\r\n        );\r\n        if(inCart){\r\n            setCartItems(\r\n                cartItems.map((productInCart)=>{\r\n                    if(productInCart.id === product.id){\r\n                        return{... inCart, amount:inCart.amount + 1};\r\n                    } else return productInCart;\r\n                })\r\n            );\r\n        } else {\r\n        setCartItems([... cartItems,{... product, amount:1}]);\r\n        }\r\n    }\r\n\r\n    const deleteItemToCart = (product) => {\r\n        const inCart = cartItems.find(\r\n            (productInCart) => productInCart.id === product.id\r\n        );\r\n        if (inCart.amount === 1) {\r\n            setCartItems(\r\n                cartItems.filter((productInCart) => productInCart.id !== product.id)\r\n            );\r\n        } else {\r\n            setCartItems(\r\n                cartItems.map((productInCart) => {\r\n                    if(productInCart.id === product.id ) {\r\n                        return {...inCart, amount: inCart.amount - 1}\r\n                    } else return productInCart\r\n                }));\r\n            }\r\n    };\r\n\r\n  return (\r\n    /* Envolvemos el children con el provider y le pasamos un objeto con las propiedades que necesitamos por value */\r\n    <CartContext.Provider\r\n      value={{ cartItems, products, addItemToCart, editItemToCart }}\r\n    >\r\n      {children}\r\n    </CartContext.Provider>\r\n  );\r\n};\r\n\r\nexport default CartContext;"],"mappings":";;;AAAA,SAASA,aAAT,EAAwBC,SAAxB,EAAmCC,QAAnC,QAAmD,OAAnD;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAyB,YAAzB;AAEA;;;AACA,MAAMC,WAAW,gBAAGL,aAAa,EAAjC;AAEA,OAAO,MAAMM,YAAY,GAAG,QAAkB;EAAA;;EAAA,IAAjB;IAAEC;EAAF,CAAiB;;EAC5C;EACA,MAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BP,QAAQ,CAAC,EAAD,CAA1C;EACA,MAAM,CAACQ,QAAD,EAAWC,WAAX,IAA0BT,QAAQ,CAAC,EAAD,CAAxC;;EAEA,MAAMU,WAAW,GAAG,YAAY;IAC9B,MAAMT,KAAK,CACRU,GADG,CACC,gCADD,EACmC;MAACC,OAAO,EAAE;QAACC,aAAa,EAAE,YAAYX,QAAQ;MAApC;IAAV,CADnC,EAEHY,IAFG,CAEE;MAAA,IAAC;QAAEC;MAAF,CAAD;MAAA,OAAcN,WAAW,CAACM,IAAI,CAACP,QAAN,CAAzB;IAAA,CAFF,CAAN;EAGD,CAJD;;EAME,MAAMQ,aAAa,GAAIC,OAAD,IAAa;IAC/B,MAAMC,MAAM,GAAGZ,SAAS,CAACa,IAAV,CACdC,aAAD,IAAkBA,aAAa,CAACC,EAAd,KAAqBJ,OAAO,CAACI,EADhC,CAAf;;IAGA,IAAGH,MAAH,EAAU;MACNX,YAAY,CACRD,SAAS,CAACgB,GAAV,CAAeF,aAAD,IAAiB;QAC3B,IAAGA,aAAa,CAACC,EAAd,KAAqBJ,OAAO,CAACI,EAAhC,EAAmC;UAC/B,OAAM,EAAC,GAAIH,MAAL;YAAaK,MAAM,EAACL,MAAM,CAACK,MAAP,GAAgB;UAApC,CAAN;QACH,CAFD,MAEO,OAAOH,aAAP;MACV,CAJD,CADQ,CAAZ;IAOH,CARD,MAQO;MACPb,YAAY,CAAC,CAAC,GAAID,SAAL,EAAe,EAAC,GAAIW,OAAL;QAAcM,MAAM,EAAC;MAArB,CAAf,CAAD,CAAZ;IACC;EACJ,CAfD;;EAiBA,MAAMC,gBAAgB,GAAIP,OAAD,IAAa;IAClC,MAAMC,MAAM,GAAGZ,SAAS,CAACa,IAAV,CACVC,aAAD,IAAmBA,aAAa,CAACC,EAAd,KAAqBJ,OAAO,CAACI,EADrC,CAAf;;IAGA,IAAIH,MAAM,CAACK,MAAP,KAAkB,CAAtB,EAAyB;MACrBhB,YAAY,CACRD,SAAS,CAACmB,MAAV,CAAkBL,aAAD,IAAmBA,aAAa,CAACC,EAAd,KAAqBJ,OAAO,CAACI,EAAjE,CADQ,CAAZ;IAGH,CAJD,MAIO;MACHd,YAAY,CACRD,SAAS,CAACgB,GAAV,CAAeF,aAAD,IAAmB;QAC7B,IAAGA,aAAa,CAACC,EAAd,KAAqBJ,OAAO,CAACI,EAAhC,EAAqC;UACjC,OAAO,EAAC,GAAGH,MAAJ;YAAYK,MAAM,EAAEL,MAAM,CAACK,MAAP,GAAgB;UAApC,CAAP;QACH,CAFD,MAEO,OAAOH,aAAP;MACV,CAJD,CADQ,CAAZ;IAMC;EACR,CAhBD;;EAkBF;IAAA;;IACE;IACA,QAAC,WAAD,CAAa,QAAb;MACE,KAAK,EAAE;QAAEd,SAAF;QAAaE,QAAb;QAAuBQ,aAAvB;QAAsCU;MAAtC,CADT;MAAA,UAGGrB;IAHH;MAAA;MAAA;MAAA;IAAA;EAFF;AAQD,CAtDM;;GAAMD,Y;;KAAAA,Y;AAwDb,eAAeD,WAAf"},"metadata":{},"sourceType":"module"}