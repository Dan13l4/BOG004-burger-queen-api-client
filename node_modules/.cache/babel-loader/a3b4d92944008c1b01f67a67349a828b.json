{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\57322\\\\Documents\\\\GitHub\\\\Proyectos Laboratoria\\\\BOG004-burger-queen-api-client\\\\src\\\\pages\\\\ViewUsers.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport \"../components/stylesheets/Cards.css\";\nimport { getUser } from \"../api/api\";\nimport minusIcons from '../assets/minus-sign.png';\nimport editIcon from '../assets/edit-icon.png';\nimport NavBarAdmin from '../components/NavBarAdmin';\nimport { deleteUsers, updateUser } from '../api/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction ViewUsers() {\n  _s();\n\n  const [users, setUsers] = useState([]);\n  const [message, setMessage] = useState(\"\");\n  const [hasError, setHasError] = useState(\"\");\n  const [values, setValues] = useState({\n    email: \"\",\n    password: \"\",\n    roles: {}\n  });\n\n  const getUsers = () => {\n    getUser().then(response => {\n      console.log(response.data);\n      setUsers(response.data);\n    }).catch(() => {});\n  };\n\n  useEffect(() => {\n    getUsers();\n  }, []);\n\n  const editUser = async e => {\n    e.preventDefault();\n\n    try {\n      const response = await updateUser(values);\n      const {\n        user\n      } = response.data;\n      getUsers();\n      setMessage(\"Datos actualizados correctamente\");\n      console.log(user);\n    } catch (error) {\n      setHasError(\"No se ha podido actualizar el usuario\");\n      console.error(error);\n    }\n  };\n\n  const handleChange = e => {\n    console.log(e.target.value, 'values', values);\n    const newValues = { ...values,\n      roles: {}\n    };\n    newValues.roles[e.target.value] = true;\n    setValues(newValues);\n  };\n\n  const handleInput = e => {\n    const newValues = { ...values,\n      [e.target.name]: e.target.value\n    };\n    setValues(newValues);\n  };\n\n  const deleteUser = async id => {\n    return await deleteUsers(id).then(response => {\n      getUsers();\n      setMessage(\"El usuario fue eliminado correctamente\");\n      console.log(\"response\", response);\n    }).catch(err => {\n      setHasError(\"No se ha podido borrar el usuario\");\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(NavBarAdmin, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container d-flex flex-column justify-content-center align-items-center h-100\",\n      style: {\n        marginTop: 40\n      },\n      children: [users.map(user => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"\",\n        children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"\",\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"users-li\",\n            children: [\" Email: \", user.email]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"users-li\",\n            children: [\" Password: \", user.password]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"users-li\",\n            children: [\" Roles: \", Object.keys(user.roles)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-sm btn-primary\",\n          onClick: () => editUser(user.id),\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: editIcon,\n            alt: \"btn edit\",\n            style: {\n              width: 15,\n              alignSelf: 'center'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 93\n          }, this), \" Edit User\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-sm btn-danger\",\n          onClick: () => deleteUser(user.id),\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: minusIcons,\n            alt: \"btn plus\",\n            style: {\n              width: 15,\n              alignSelf: 'center'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 95\n          }, this), \" Delete User\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 17\n        }, this)]\n      }, user.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this)), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\" \", message, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\" \", hasError, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n\n_s(ViewUsers, \"bu7cNczR8nF5mQnBUec2WN4iRQc=\");\n\n_c = ViewUsers;\nexport default ViewUsers;\n\nvar _c;\n\n$RefreshReg$(_c, \"ViewUsers\");","map":{"version":3,"names":["React","useEffect","useState","getUser","minusIcons","editIcon","NavBarAdmin","deleteUsers","updateUser","ViewUsers","users","setUsers","message","setMessage","hasError","setHasError","values","setValues","email","password","roles","getUsers","then","response","console","log","data","catch","editUser","e","preventDefault","user","error","handleChange","target","value","newValues","handleInput","name","deleteUser","id","err","marginTop","map","Object","keys","width","alignSelf"],"sources":["C:/Users/57322/Documents/GitHub/Proyectos Laboratoria/BOG004-burger-queen-api-client/src/pages/ViewUsers.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport \"../components/stylesheets/Cards.css\";\r\nimport { getUser } from \"../api/api\";\r\nimport minusIcons from '../assets/minus-sign.png';\r\nimport editIcon from '../assets/edit-icon.png';\r\nimport NavBarAdmin from '../components/NavBarAdmin';\r\nimport { deleteUsers, updateUser } from '../api/api';\r\n\r\nfunction ViewUsers() {\r\n\r\n    const [users, setUsers] = useState([]);\r\n    const [message, setMessage] = useState(\"\");\r\n  const [hasError, setHasError] = useState(\"\");\r\n\r\n    const [values, setValues] = useState({\r\n        email: \"\",\r\n        password: \"\",\r\n        roles: { }\r\n    });\r\n\r\n    const getUsers = () => {\r\n        getUser()\r\n        .then((response) =>{\r\n        console.log(response.data);\r\n        setUsers(response.data)\r\n        })\r\n        .catch(() =>{});\r\n    }\r\n\r\n    useEffect(() => {\r\n      getUsers();\r\n    }, []);\r\n\r\n\r\n    const editUser = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n          const response = await updateUser(values);\r\n          const { user } = response.data;\r\n          getUsers();\r\n          setMessage(\"Datos actualizados correctamente\");\r\n          console.log(user)\r\n        } catch (error) {\r\n          setHasError(\"No se ha podido actualizar el usuario\");\r\n          console.error(error);\r\n        }\r\n      };\r\n    \r\n      const handleChange = (e) => {\r\n        console.log(e.target.value, 'values', values)\r\n        const newValues = {\r\n          ...values,\r\n          roles: { },\r\n        };\r\n        newValues.roles[e.target.value]=true\r\n        setValues(newValues);\r\n      }\r\n    \r\n      const handleInput = (e) => {\r\n        const newValues = {\r\n        ...values,\r\n        [e.target.name]: e.target.value,\r\n        };\r\n        setValues(newValues);\r\n      }\r\n\r\n    const deleteUser = async (id) =>{\r\n        return await deleteUsers(id)\r\n        .then((response) =>{\r\n            getUsers();\r\n            setMessage(\"El usuario fue eliminado correctamente\");\r\n            console.log(\"response\", response)\r\n        })\r\n        .catch((err)=>{\r\n            setHasError(\"No se ha podido borrar el usuario\");\r\n        })\r\n    }\r\n\r\n\treturn (\r\n        <>\r\n        <NavBarAdmin></NavBarAdmin>\r\n        <div className='container d-flex flex-column justify-content-center align-items-center h-100' style={{marginTop:40}}>\r\n            {users.map((user)=>(\r\n                <div className='' key={user.id}>\r\n                <ul className=''>\r\n                    <li className='users-li'> Email: {user.email}</li>\r\n                    <li className='users-li'> Password: {user.password}</li>\r\n                    <li className='users-li'> Roles: {Object.keys(user.roles)}</li>\r\n                </ul>\r\n\r\n                <button className=\"btn btn-sm btn-primary\" onClick={()=> editUser(user.id)}><img src={editIcon} alt=\"btn edit\" style={{width:15, alignSelf:'center'}} /> Edit User</button>\r\n                <button className=\"btn btn-sm btn-danger\"  onClick={()=> deleteUser(user.id)}><img src={minusIcons} alt=\"btn plus\" style={{width:15, alignSelf:'center'}} /> Delete User</button>\r\n            </div>\r\n            ))}\r\n        <p> {message} </p>\r\n        <p> {hasError} </p>\r\n        </div>\r\n        </>\r\n\t);\r\n}\r\n\r\nexport default ViewUsers;"],"mappings":"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"},"metadata":{},"sourceType":"module"}