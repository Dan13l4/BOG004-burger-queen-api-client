{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\57322\\\\Documents\\\\GitHub\\\\Proyectos Laboratoria\\\\BOG004-burger-queen-api-client\\\\src\\\\Context\\\\CartContext.jsx\",\n    _s = $RefreshSig$();\n\nimport { createContext, useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { getToken } from '../api/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BASE_URL = 'http://localhost:8080/';\n/* Creamos el context, se le puede pasar un valor inicial */\n\nconst CartContext = /*#__PURE__*/createContext();\nexport const CartProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n\n  /* Creamos un estado para el carrito */\n  const [cartItems, setCartItems] = useState([]);\n  const [products, setProducts] = useState([]);\n\n  const getProducts = async () => {\n    await axios.get(\"http://localhost:8080/\").then(_ref2 => {\n      let {\n        data\n      } = _ref2;\n      return setProducts(data.products);\n    });\n  };\n\n  const getProductsCart = async () => {\n    return await axios.get(\"http://localhost:4000/products-cart\").then(_ref3 => {\n      let {\n        data\n      } = _ref3;\n      return setCartItems(data.productsCart);\n    }).catch(error => console.error(error));\n  };\n\n  useEffect(() => {\n    getProducts();\n    getProductsCart();\n  }, []);\n\n  const addItemToCart = async product => {\n    const {\n      name,\n      img,\n      price\n    } = product;\n    await axios.post(\"http://localhost:4000/products-cart\", {\n      name,\n      img,\n      price\n    });\n    getProducts();\n    getProductsCart();\n  };\n\n  const editItemToCart = async (id, query, amount) => {\n    if (query === \"del\" && amount === 1) {\n      await axios.delete(`http://localhost:4000/products-cart/${id}`).then(_ref4 => {\n        let {\n          data\n        } = _ref4;\n        return console.log(data);\n      });\n    } else {\n      await axios.put(`http://localhost:4000/products-cart/${id}?query=${query}`, {\n        amount\n      }).then(_ref5 => {\n        let {\n          data\n        } = _ref5;\n        return console.log(data);\n      });\n    }\n\n    getProducts();\n    getProductsCart();\n  };\n\n  return (\n    /*#__PURE__*/\n\n    /* Envolvemos el children con el provider y le pasamos un objeto con las propiedades que necesitamos por value */\n    _jsxDEV(CartContext.Provider, {\n      value: {\n        cartItems,\n        products,\n        addItemToCart,\n        editItemToCart\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 5\n    }, this)\n  );\n};\n\n_s(CartProvider, \"JnNw4OeW+BvjZtSgjbMv2qiBkUU=\");\n\n_c = CartProvider;\nexport default CartContext;\n\nvar _c;\n\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["createContext","useEffect","useState","axios","getToken","BASE_URL","CartContext","CartProvider","children","cartItems","setCartItems","products","setProducts","getProducts","get","then","data","getProductsCart","productsCart","catch","error","console","addItemToCart","product","name","img","price","post","editItemToCart","id","query","amount","delete","log","put"],"sources":["C:/Users/57322/Documents/GitHub/Proyectos Laboratoria/BOG004-burger-queen-api-client/src/Context/CartContext.jsx"],"sourcesContent":["import { createContext, useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { getToken } from '../api/api';\r\nconst BASE_URL = 'http://localhost:8080/';\r\n\r\n/* Creamos el context, se le puede pasar un valor inicial */\r\nconst CartContext = createContext();\r\n\r\nexport const CartProvider = ({ children }) => {\r\n  /* Creamos un estado para el carrito */\r\n  const [cartItems, setCartItems] = useState([]);\r\n  const [products, setProducts] = useState([]);\r\n\r\n  const getProducts = async () => {\r\n    await axios\r\n      .get(\"http://localhost:8080/\")\r\n      .then(({ data }) => setProducts(data.products));\r\n  };\r\n\r\n  const getProductsCart = async () => {\r\n    return await axios\r\n      .get(\"http://localhost:4000/products-cart\")\r\n      .then(({ data }) => setCartItems(data.productsCart))\r\n      .catch((error) => console.error(error));\r\n  };\r\n\r\n  useEffect(() => {\r\n    getProducts();\r\n    getProductsCart();\r\n  }, []);\r\n\r\n  const addItemToCart = async (product) => {\r\n    const { name, img, price } = product;\r\n\r\n    await axios.post(\"http://localhost:4000/products-cart\", { name, img, price });\r\n\r\n    getProducts();\r\n    getProductsCart();\r\n  };\r\n\r\n  const editItemToCart = async (id, query, amount) => {\r\n    if (query === \"del\" && amount === 1) {\r\n      await axios\r\n        .delete(`http://localhost:4000/products-cart/${id}`)\r\n        .then(({ data }) => console.log(data));\r\n    } else {\r\n      await axios\r\n        .put(`http://localhost:4000/products-cart/${id}?query=${query}`, {\r\n          amount,\r\n        })\r\n        .then(({ data }) => console.log(data));\r\n    }\r\n\r\n    getProducts();\r\n    getProductsCart();\r\n  };\r\n\r\n  return (\r\n    /* Envolvemos el children con el provider y le pasamos un objeto con las propiedades que necesitamos por value */\r\n    <CartContext.Provider\r\n      value={{ cartItems, products, addItemToCart, editItemToCart }}\r\n    >\r\n      {children}\r\n    </CartContext.Provider>\r\n  );\r\n};\r\n\r\nexport default CartContext;"],"mappings":";;;AAAA,SAASA,aAAT,EAAwBC,SAAxB,EAAmCC,QAAnC,QAAmD,OAAnD;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAyB,YAAzB;;AACA,MAAMC,QAAQ,GAAG,wBAAjB;AAEA;;AACA,MAAMC,WAAW,gBAAGN,aAAa,EAAjC;AAEA,OAAO,MAAMO,YAAY,GAAG,QAAkB;EAAA;;EAAA,IAAjB;IAAEC;EAAF,CAAiB;;EAC5C;EACA,MAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BR,QAAQ,CAAC,EAAD,CAA1C;EACA,MAAM,CAACS,QAAD,EAAWC,WAAX,IAA0BV,QAAQ,CAAC,EAAD,CAAxC;;EAEA,MAAMW,WAAW,GAAG,YAAY;IAC9B,MAAMV,KAAK,CACRW,GADG,CACC,wBADD,EAEHC,IAFG,CAEE;MAAA,IAAC;QAAEC;MAAF,CAAD;MAAA,OAAcJ,WAAW,CAACI,IAAI,CAACL,QAAN,CAAzB;IAAA,CAFF,CAAN;EAGD,CAJD;;EAMA,MAAMM,eAAe,GAAG,YAAY;IAClC,OAAO,MAAMd,KAAK,CACfW,GADU,CACN,qCADM,EAEVC,IAFU,CAEL;MAAA,IAAC;QAAEC;MAAF,CAAD;MAAA,OAAcN,YAAY,CAACM,IAAI,CAACE,YAAN,CAA1B;IAAA,CAFK,EAGVC,KAHU,CAGHC,KAAD,IAAWC,OAAO,CAACD,KAAR,CAAcA,KAAd,CAHP,CAAb;EAID,CALD;;EAOAnB,SAAS,CAAC,MAAM;IACdY,WAAW;IACXI,eAAe;EAChB,CAHQ,EAGN,EAHM,CAAT;;EAKA,MAAMK,aAAa,GAAG,MAAOC,OAAP,IAAmB;IACvC,MAAM;MAAEC,IAAF;MAAQC,GAAR;MAAaC;IAAb,IAAuBH,OAA7B;IAEA,MAAMpB,KAAK,CAACwB,IAAN,CAAW,qCAAX,EAAkD;MAAEH,IAAF;MAAQC,GAAR;MAAaC;IAAb,CAAlD,CAAN;IAEAb,WAAW;IACXI,eAAe;EAChB,CAPD;;EASA,MAAMW,cAAc,GAAG,OAAOC,EAAP,EAAWC,KAAX,EAAkBC,MAAlB,KAA6B;IAClD,IAAID,KAAK,KAAK,KAAV,IAAmBC,MAAM,KAAK,CAAlC,EAAqC;MACnC,MAAM5B,KAAK,CACR6B,MADG,CACK,uCAAsCH,EAAG,EAD9C,EAEHd,IAFG,CAEE;QAAA,IAAC;UAAEC;QAAF,CAAD;QAAA,OAAcK,OAAO,CAACY,GAAR,CAAYjB,IAAZ,CAAd;MAAA,CAFF,CAAN;IAGD,CAJD,MAIO;MACL,MAAMb,KAAK,CACR+B,GADG,CACE,uCAAsCL,EAAG,UAASC,KAAM,EAD1D,EAC6D;QAC/DC;MAD+D,CAD7D,EAIHhB,IAJG,CAIE;QAAA,IAAC;UAAEC;QAAF,CAAD;QAAA,OAAcK,OAAO,CAACY,GAAR,CAAYjB,IAAZ,CAAd;MAAA,CAJF,CAAN;IAKD;;IAEDH,WAAW;IACXI,eAAe;EAChB,CAfD;;EAiBA;IAAA;;IACE;IACA,QAAC,WAAD,CAAa,QAAb;MACE,KAAK,EAAE;QAAER,SAAF;QAAaE,QAAb;QAAuBW,aAAvB;QAAsCM;MAAtC,CADT;MAAA,UAGGpB;IAHH;MAAA;MAAA;MAAA;IAAA;EAFF;AAQD,CAzDM;;GAAMD,Y;;KAAAA,Y;AA2Db,eAAeD,WAAf"},"metadata":{},"sourceType":"module"}